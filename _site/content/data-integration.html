<!DOCTYPE html>
<html>

  <head>
  




  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title> Data Integration - Data Curation II / Spring 2024 </title>
  <meta name="description" content="Data Integration - Data Curation II / Spring 2024">
  
  <link rel="stylesheet" href="/lis546_Sp24//_css/main.css">
  <link rel="canonical" href="http://localhost:4000/lis546_Sp24//content/data-integration">
  <link rel="alternate" type="application/rss+xml" title="Data Curation II / Spring 2024 - University of Washington Information School" href="http://localhost:4000/lis546_Sp24//feed.xml" />
<link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.2.4' type='text/css' media='all' />
<link href='https://fonts.googleapis.com/css?family=Titillium+Web:600italic,600,400,400italic' rel='stylesheet' type='text/css'>




<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper" style="z-index: 100;">
      <table><tr>
          <td><img width="75" src="/lis546_Sp24//_images/iSchoolSymbolOnly_RGB_White.png" valign="middle"></td>
          <td style="padding-left:10px;"><a class="schoolname" style="font-size: 15px;" class="site-title" href="https://ischool.uw.edu/">University of Washington Information School</a>
          <br/>
          <span style="margin-top: -2px;margin-bottom: -10px;" class="site-title"><a href="/lis546_Sp24//" title="Data Curation II / Spring 2024 - University of Washington Information School"><b>Data Curation II</a></b></span>
          <br/>
          <span class="coursesemeter" style="font-size: 12px;font-weight: bold;margin-top: 10px;display: block;">Spring 2024</span>
          </td>
        </tr></table>

    <nav class="site-nav">

      <a href="#" class="menu-icon menu.open">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>  

    <div class="trigger"><h1>Main Navigation</h1>

 <ul class="menu">
    
    <li>
        <a class="page-link" href="/lis546_Sp24//">
            <i class="fa fa-home fa-lg"></i> Home
        </a>
    </li>
    
    <li>
        <a class="page-link" href="/lis546_Sp24//schedule/">
            <i class="fas fa-calendar-alt"></i> Schedule
        </a>
    </li>
    
    <li>
        <a class="page-link" href="/lis546_Sp24//lectures/">
            <i class="fas fa-book-reader"></i> Modules
        </a>
    </li>
    
    <li>
        <a class="page-link" href="/lis546_Sp24//assignments/">
            <i class="fas fa-user-graduate"></i> Assignments
        </a>
    </li>
    
    <li>
        <a class="page-link" href="/lis546_Sp24//project/">
            <i class="fas fa-user-graduate"></i> Project
        </a>
    </li>
    
</ul>

     </div>  
    </nav>

  </div>

  <div class="header-texture" style="height:100%; z-index: 0; position: absolute; top:0; right: 0; left: 0; 
  background-image: url('/lis546_Sp24//_images/pattern.png');" />

</header>


    <div class="page-content">
      <div class="wrapper">
        <h1 id="data-integration">Data Integration</h1>
<p><strong>Original Author: Nic Weber</strong><br />
<strong>Editing &amp; Updates: Bree Norlander</strong></p>

<p>The next four weeks of our class will focus on “grand challenges” in data curation. A <a href="https://en.wikipedia.org/wiki/Grand_Challenges">grand challenge</a> in this context is a problem that requires sustained research and development activities through collective action. Data integration, packaging, discovery, and meaningful descriptive documentation (metadata) are longstanding grand challenges that are approached through a community of practitioners and researchers in curation. This module focuses on data integration as it operates at the logical level of tables and data that feed into user interfaces.</p>

<h2 id="integration-as-a-grand-challenge">Integration as a Grand Challenge</h2>

<p>In the popular imagination, much of curation work is positioned as the activities necessary to prepare data for meaningful analysis and reuse. For example, when data scientists describe curation work they often say something to the effect of “95% of data science is about wrangling / cleaning.”</p>

<p>If there are only two things I am trying to actively argue against in this class it is this:</p>

<ul>
  <li>Curation is not <em>just</em> cleaning or wrangling data. It includes the attendant practices of making data contextually meaningful. This includes a good deal of cleaning or wrangling, but is much broader in scope than simply preparing data for analysis.</li>
  <li>Metadata is not just “data about data”. It is a complex and important knowledge organization activity that impacts nearly every aspect of data use. Every time someone says “metadata is just data about data” a tautology angel gets its wings.</li>
</ul>

<p>In future weeks we will discuss practical ways to approach metadata and documentation that are in line with curation as an activity that goes beyond simply preparing data for analysis. This week, however, we are focused on conceptualizing and approaching the topic of data integration. The combining of datasets is a grand challenge for curation in part because of our expectations for how seemingly obvious this activity <em>should</em> be. Take a moment to consider this at a high level of abstraction: One of the spillover effects of increased openness in government, scientific, and private sector data practices is the availability of more and more structured data. The ability to combine and meaningfully incorporate different information, based on these structures, should be possible. For example:</p>

<ul>
  <li>All municipalities have a fire department.</li>
  <li>All municipal fire departments have a jurisdictional mandate to proactively investigate fire code compliance.</li>
  <li>It follows, logically, that we should be able to use openly published structured data to look across jurisdictions and understand fire code compliance.</li>
</ul>

<p>But, in practice this proves to be incredibly difficult. Each jurisdiction has a slightly different fire code, and each municipal fire department records their investigation of compliance in appreciably different ways. So when we approach a question like “fire code compliance” we have to not just clean data in order for it be combined, but think conceptually about the structural differences in datasets and how they might be integrated with one another.</p>

<h2 id="enumerating-data-integration-challenges">Enumerating data integration challenges</h2>

<p>So, if structured data integration is intuitive conceptually, but in practice the ability to combine one or more data sources is incredibly difficult, then we should be able to generalize some of the problems that are encountered in this activity. Difficulties in data integration break down into, at least, the following:</p>

<ol>
  <li><strong>Content Semantics:</strong> Different sectors, jurisdictions, or even domains of inquiry may refer to the same concept differently. In data tidying we discussed ways that data values and structures can be made consistent, but we didn’t discuss the ways in which different tables might be combined when they represent the same concept differently.</li>
  <li><strong>Data Structures or Encodings:</strong> Even if the same concepts are present in a dataset, the data may be practically arranged or encoded in different ways. This may be as simple as variables being listed in a different order, but it may also mean that one dataset is published in <code class="language-plaintext highlighter-rouge">CSV</code> another in <code class="language-plaintext highlighter-rouge">JSON</code> and yet another in an <code class="language-plaintext highlighter-rouge">SQL</code> table export.</li>
  <li><strong>Data Granularity:</strong> The same concept may be present in a dataset, but it may have finer or coarser levels of granularity (e.g. One dataset may have monthly aggregates and another contains daily aggregates).</li>
</ol>

<p>The curation tradeoff that we’ve discussed throughout both DC 1 and DC 2 in terms of “expressivity and tractability” is again rearing its head. In deciding how any one difficulty should be overcome we have to balance a need for retaining conceptual representations that are accurate and meaningful. In data integration, we have to be careful not go overboard in retaining an accurate representation of the same concept such that it fails to be meaningfully combined with another dataset.</p>

<p>Data Integration, as you might have inferred, is always a downstream curation activity. But, understanding challenges in data integration can also help with decisions that happen upstream in providing recommendations for how data can be initially recorded and documented such that it will be <em>amenable</em> to future integration. (A small plug here for our introductory module - when I described a curator’s need to “infrastructurally imagine” how data will be used and reused within a broader information system, upstream curation activities that forecast data integration challenges are very much what I meant.)</p>

<h2 id="integration-precursors">Integration Precursors</h2>

<p>To overcome difficulties in combining different data tables we can engage with curation activities that I think of as “integration precursors” - ways to conceptualize and investigate differences in two datasets before we begin restructuring, normalizing, or cleaning. These integration precursors are related to 1. Modeling; 2. Observational depth; and, 3. Variable Homogeneity.</p>

<h3 id="modeling-table-content">Modeling Table Content</h3>

<p>The first activity in data integration is to informally or formally model the structure of a data table. In DC 1 we created data dictionaries which were focused on providing users of data a quick and precise overview of their contents. Data dictionaries are also a method for informally modeling the content of a dataset so that we, as curators, can make informed decisions about restructuring and cleaning.</p>

<p>Here is an example of two data dictionaries for the same conceptual information: 311 service requests to the city of <a href="https://data.cityofchicago.org/Service-Requests/311-Service-Requests/v6vf-nfxy">Chicago, IL</a> and <a href="https://data.austintexas.gov/City-Government/311-Unified-Data-Test-Site-2019/i26j-ai4z">Austin, TX</a> (not especially the section called “Columns in this Dataset”). Intuitively, we would expect that data from these two cities are similar enough in  content that they can be meaningfully combined.</p>

<p>If we look at the <a href="https://www.govtech.com/dc/articles/What-is-311.html">purpose of 311</a> we should be able to imagine at least a few of the columns, before we even dive into an existing dataset. We can probably safely assume there will be:</p>

<ol>
  <li>A date</li>
  <li>A report of some service outage or complaint</li>
  <li>A location of the report or complaint, and</li>
  <li>The responsible city service that should respond.</li>
</ol>

<p>The reality is much messier.</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/dataintegration-model.png" alt="Data Dictionaries from Chicago and Austin 311 Data" /></p>

<p>Even though these two cities record the same information about the same concept using the same data infrastructure (each city publishes data using a Socrata-based data repository) there are appreciable differences and challenges in integrating these two datasets. The annotations above point out some of these slight but appreciable differences:</p>

<p><strong>Granularity</strong><br />
We can see that the Chicago dataset contains a variable <code class="language-plaintext highlighter-rouge">Status</code>. As of April 3, 2021, the column has no description, but if we perform a little <a href="https://data.cityofchicago.org/resource/v6vf-nfxy.json?$select=distinct%20status">magic with the API</a> (more on this in a later module) we can see that the values in this field are:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[{"status":"Canceled"}
,{"status":"Completed"}
,{"status":"Open"}]
</code></pre></div></div>

<p>Additionally, there is a field called <code class="language-plaintext highlighter-rouge">Duplicate</code> with the <a href="https://data.cityofchicago.org/resource/v6vf-nfxy.json?$select=distinct%20duplicate">following values</a>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[{"duplicate":false}
,{"duplicate":true}]
</code></pre></div></div>

<p>The Austin dataset contains a similar variable <code class="language-plaintext highlighter-rouge">SR_Status</code> with a description of “Duplicate statuses indicate that issue had previously been reported recently.” If we perform our <a href="https://data.austintexas.gov/resource/i26j-ai4z.json?$select=distinct%20sr_status_desc">API magic</a> again, the values in the field are:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[{"sr_status_desc":"CancelledTesting"}
,{"sr_status_desc":"Closed"}
,{"sr_status_desc":"Closed -Incomplete"}
,{"sr_status_desc":"Closed -Incomplete Information"}
,{"sr_status_desc":"Duplicate (closed)"}
,{"sr_status_desc":"Duplicate (open)"}
,{"sr_status_desc":"Incomplete"}
,{"sr_status_desc":"New"}
,{"sr_status_desc":"Open"}
,{"sr_status_desc":"Resolved"}
,{"sr_status_desc":"TO BE DELETED"}
,{"sr_status_desc":"Transferred"}
,{"sr_status_desc":"Work In Progress"}]
</code></pre></div></div>

<p>So the Austin dataset uses one column to indicate status, including duplicate status, while the Chicago dataset uses two columns to indicate status, with the duplicate value being afforded its own column. Additionally, the Austin dataset is more granular in terms of the variety of statuses they record. To integrate these datasets we would need to decide both how to deal with the duplicate statuses AND we would need to determine which values were important to include and how we would crosswalk the differences. For example, would we collapse the “Closed - Incomplete”, “Closed - Incomplete Information”, “CancelledTesting”, “TO BE DELETED”, from the Austin dataset into the simpler “Closed” value used in the Chicago dataset? How would we determine if they had the same meaning?</p>

<p><strong>Semantics</strong><br />
Both datasets include information about the most recent update (response) to the request, but these variables are labeled in slightly different ways - <code class="language-plaintext highlighter-rouge">LAST_MODIFIED_DATE</code> and <code class="language-plaintext highlighter-rouge">Last Update Date</code>. This seem like it should be fairly simple to tidy by renaming the data variable (but as we will see, this proves to be more more challenging than just renaming the variable).</p>

<p><strong>Structure</strong><br />
Both datasets also include location information about the report. However, there is both different granularity as well as a different ordering of these variables. To tidy this location information, we would need to determine which variables to retain and which to discard.</p>

<p>The process of modeling our data tables before integration facilitates making accurate decisions, but also enables us to record those decisions and communicate them to end-users. A data dictionary, or a loose description of the contents of both tables, is often our first step in deciding which data cleaning activities we need to undertake for integrating data.</p>

<h3 id="determine-the-observation-depth">Determine the Observation Depth</h3>

<p>In integrating two data tables there will likely be a difference in granularity of values. That is, even if the same variable is present in both datasets this does not necessarily mean that the same unit of measurement is used between the two data tables.</p>

<p>As curators, value granularity prompts a decision about what specificity is necessary to retain or discard in the new integrated table.</p>

<p>A simple example will make this clear. Imagine we have three tables <code class="language-plaintext highlighter-rouge">Location A</code>, <code class="language-plaintext highlighter-rouge">Location B</code>, and <code class="language-plaintext highlighter-rouge">Location C</code>. Each table contains the same variable <code class="language-plaintext highlighter-rouge">BirthWeight</code>, but the values for <code class="language-plaintext highlighter-rouge">BirthWeight</code> in each table have a different observational depth. In comparing the values for this variable we might even observe (presumably) different units of measurement.</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/3_tables.png" alt="Title is Polar Bears. There are three tables, Location A, Location B, Location C with one column each titles BirthWeight" width="500" /></p>

<p>This example looks simple at face value, but will require an important decision for integration. Tables <code class="language-plaintext highlighter-rouge">Location A</code> and <code class="language-plaintext highlighter-rouge">Location B</code> both represent observational values of <code class="language-plaintext highlighter-rouge">BirthWeight</code> as <a href="https://en.wikipedia.org/wiki/Integer">integers</a> but definitely of different units of measurement. Table <code class="language-plaintext highlighter-rouge">Location C</code> represents the observational values of <code class="language-plaintext highlighter-rouge">BirthWeight</code> as a decimal number most likely in the same unit of measurement as <code class="language-plaintext highlighter-rouge">Location B</code>.</p>

<p>Hopefully there is a data dictionary or text somewhere to indicate that the values in table <code class="language-plaintext highlighter-rouge">Location A</code> are in grams and the values in both tables <code class="language-plaintext highlighter-rouge">Location B</code> and <code class="language-plaintext highlighter-rouge">Location C</code> are in ounces. A best guess as to the different ounce values would be that table <code class="language-plaintext highlighter-rouge">Location B</code> values are rounded to the nearest whole number (ones place), while table <code class="language-plaintext highlighter-rouge">Location C</code> values are rounded to (or recorded as) the nearest hundredths place. Once we recognize these differences, our decision is two-fold. Should we convert the ounces to grams or vice versa and then will we use decimals or round to integers?</p>

<p>Regardless of our decision it is important to note that we are not just changing the values, but we are also changing their <code class="language-plaintext highlighter-rouge">encoding</code> - that is whether they represent integers or decimal numbers. (And we would need to document this change in our documentation). This may also affect their data type, for example <a href="https://www.w3schools.com/python/python_datatypes.asp">Python</a> has both integer and float (for decimal values) data types. Here is one possible integration solution:</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/3_tables_integrated.png" alt="Title is Polar Bears. There is one table, with two columns titled Location and BirthWeight_Ounces" width="300" /></p>

<p>Let’s look at differences in observational depth from two variables in the 311 data described above.</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/CreatedDate_2tables.png" alt="Two tables of Created Dates with different levels of granularity" width="500" /></p>

<p>Chicago represents time of a 311 report following a <code class="language-plaintext highlighter-rouge">MM/DD/YYYY HH:MM:SS 12HR</code> form, while Austin represents this same information with <code class="language-plaintext highlighter-rouge">YYYY MON DD HH:MM:SS 12HR</code></p>

<p>The observational depth (granularity) is the same in both tables but the formats of <code class="language-plaintext highlighter-rouge">date</code> in both datasets differ (and neither are ISO 8601).</p>

<p>If we want to integrate these two tables then we have to decide how to standardize the values.</p>

<p>Regardless of how we decide to standardize this data, what we have to try to retain is a reliable reporting of the date such that the two sets of observations are homogenous.</p>

<p><img src="https://imgs.xkcd.com/comics/iso_8601.png " alt="xkcd comic about time date format ISO 8601" width="400" /></p>

<h3 id="determine-variable-homogeneity">Determine Variable Homogeneity</h3>

<p>The last integration precursor that we’ll discuss has to do with the homogeneity of a variable. In modeling two or more tables for potential integration we will seek to define and describe which variables are present, but we’ve not yet identified whether or not two variables can be reliably combined. To make this decision we need to first determine the goals of the integration. Some general criteria to consider when thinkng about the goals of integration are as follows:</p>

<ul>
  <li><strong>Analysis and Computation</strong>: If we are optimizing data integration for easing analysis then we want high amount of homogeneity in the variables we will combine.</li>
  <li><strong>Synthesis</strong>: If we are optimizing for a more general purpose, such as the ability to synthesize results from two different datasets, then we can likely afford to combine variables that may have less homogeneity</li>
  <li><strong>Statistical Significance</strong>: If we expect to create statistical summaries that require significant results (that is we will make some decision, forecast, or generalization based on our statistical analysis) then it is of the utmost importance that the combined variables have high homogeneity. But, if all that we require is a rough sense of when or where an observation occurs then low homogeneity is acceptable.</li>
</ul>

<p>An example of variable homogeneity will help make these points clear. The Chicago and Austin tables each contain a variable that roughly corresponds with the “type” of 311 request or report being made. Both tables also contain a column with a short code. If we pay attention closely to the values in these two tables we can determine that the <code class="language-plaintext highlighter-rouge">SR_Type</code> and <code class="language-plaintext highlighter-rouge">SR Description</code> are homogeneous. That is, the Chicago table and the Austin table have similar information but use slightly different semantic values to control the variable.</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/SR_Type_and_Description_2tables.png" alt="Homogeneous Tables Description Variable and SR Type Variable" width="700" /></p>

<p>Integrating these two variables in the same table seems possible, but we have a decision to make: We can either combine the two variables and leave the semantic value with low homogeneity, or we can create something like a controlled vocabulary for describing the type of 311 request being made and then normalize the data so that each value is transformed to be compliant with our vocabulary. For example, <code class="language-plaintext highlighter-rouge">Traffic Signal Out Complaint</code> in the Chicago table, and <code class="language-plaintext highlighter-rouge">Traffic Signal - Maintenance</code> in the Austin table both have to do with a report being made about traffic signals. We could create a broad category like <code class="language-plaintext highlighter-rouge">Traffic Signals</code> and then transform (that is, change the values) accordingly. But, we have only determined this step is possible by comparing the two variables directly.</p>

<p>When we determine there is a variable homogeneity that matches our intended integration goal we can then take a curation action. But, it is only through modeling, exploring observational depth, and investigating variable homogeneity that we can arrive at any one proper curation decision. It’s worth noting that the first two precursors - modeling and observational depth - don’t require us to necessarily have a goal in mind. We can start to engage in these activities before we quite know exactly what, or why we are going to integrate two tables. It is at the final step, variable homogeneity, that we start to formalize our goals and optimize our decisions as a result.</p>

<h2 id="horizontal-and-vertical-table-integration">Horizontal and Vertical Table Integration</h2>
<p>Thus far we’ve described precursors to making decisions and preparing data for integration. Once we’ve taken these steps we’re left with the practical task of combining the two tables. Generally, there are two types of table combinations that can be made: Horizontal and Vertical Integration.</p>

<h3 id="horizontal-data-integration">Horizontal data integration</h3>

<p>Horizontal data integration is necessary when we have the same set of observations, but multiple variables <em>scattered</em> across two tables. By performing a horizontal data integration we make a table <em>wider</em> by adding new variables for each observation. If you have any experience with databases this is also referred to as a <strong>join</strong> (for more information about SQL joins see <a href="https://swcarpentry.github.io/sql-novice-survey/07-join/index.html">this software carpentry lesson</a>). To horizontally integrate data we perform <code class="language-plaintext highlighter-rouge">left_joins</code> or <code class="language-plaintext highlighter-rouge">right_joins</code>.</p>

<p>To accurately perform a horizontal data integration manually - that is copying and pasting between two datasets - it is necessary to make sure that each dataset has a shared variable. When we copy and paste one table into another, we can then simply align, or match, the two shared variables to complete the integration.</p>

<p>I am also going to show you how how to perform a horizontal data integration using <code class="language-plaintext highlighter-rouge">R</code>. You do not have to follow these steps unless you are interested. To follow along you should download and install the programming language <a href="https://www.r-project.org/">R</a> and the integrated development environment (IDE) <a href="https://rstudio.com/products/rstudio/download/">RStudio</a> (select the RStudio Desktop free installation). This example comes from friends running the <a href="https://lost-stats.github.io/">Lost Stats</a> project.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Install dplyr - a package in the tidyverse for restructuring data
install.packages('dplyr')

# Load the library by calling it in your terminal.
library(dplyr)

# The data we will use contains information on GDP in local currency
GDP2018 &lt;- data.frame(Country = c("UK", "USA", "France"),
                  Currency = c("Pound", "Dollar", "Euro"),
                  GDPTrillions = c(2.1, 20.58, 2.78))

#To view the data we have just created follow the next step
View(GDP2018)

# Now we will create a second data set that contains dollar exchange rates
DollarValue2018 &lt;- data.frame(Currency = c("Euro", "Pound", "Yen", "Dollar"),
                              InDollars = c(1.104, 1.256, .00926, 1))
</code></pre></div></div>

<p>You will now have two tables that look something like this:</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/GDP2018_Data.png" alt="GDP 2018 Table" width="300" />  <img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/DollarValues2018_Data.png" alt="Exchange Rate 2018 Table" width="250" /></p>

<p>In the initial steps above we have created two data tables and assigned these tables to the name <code class="language-plaintext highlighter-rouge">GDP2018</code> and <code class="language-plaintext highlighter-rouge">DollarValue2018</code>.</p>

<p>To horizontally integrate these two tables we want to <strong>join</strong> or combine <code class="language-plaintext highlighter-rouge">GDP2018</code> and <code class="language-plaintext highlighter-rouge">DollarValue2018</code>.</p>

<p>Use <code class="language-plaintext highlighter-rouge">help(join)</code> to see the types of joins that we can make in R (and specifically look for the join help in the library <code class="language-plaintext highlighter-rouge">dplyr</code>).</p>

<p>To complete our horizontal data integration we simply do the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GDPandExchange &lt;- left_join(GDP2018, DollarValue2018)

# We have now horizontally integrated our two datasets. To view this integrated dataset call the View function:
View(GDPandExchange)
</code></pre></div></div>
<p>The new table will look something like:</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/GDPandExchange_Data.png" alt="GDP 2018 Table" width="300" /></p>

<p>A helpful note appears thanks to <code class="language-plaintext highlighter-rouge">dplyr</code> that clarifies some of the magic that just happened:</p>

<p><img src="https://raw.githubusercontent.com/norlab/LIS-546-SPR2021/master/_images/JoiningByCurrency.png" alt="GDP 2018 Table" width="400" /></p>

<p>The <code class="language-plaintext highlighter-rouge">left_join</code> (or any <code class="language-plaintext highlighter-rouge">dplyr</code> join) function will automatically detect that the <code class="language-plaintext highlighter-rouge">Currency</code> variable is shared in both data tables because it has the same column name. In recognizing this shared variable <code class="language-plaintext highlighter-rouge">dplyr</code> will use this, automatically, as the place to perform the left join. And helpfully, when <code class="language-plaintext highlighter-rouge">dplyr</code> detects this similarity, it simply retains just one example of the <code class="language-plaintext highlighter-rouge">Currency</code> variables and its values. Voilà - a single tidy data table through horizontal data integration!</p>

<h3 id="vertical-data-integration">Vertical data integration</h3>
<p>Vertical data integration, which is much more common in curation, is when we have two tables with the same variables, but different observations. To perform a vertical integration we simply add new observations to one of our existing datasets. This makes our integrated data table <em>longer</em> because it contains more observations.</p>

<p>In <code class="language-plaintext highlighter-rouge">R</code> we first will subset a native data table (one that is included as an example) and then recombine it to see how vertical integration works in practice.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Load the dplyr library so we can use its magic
library(dplyr)

# Load in mtcars data - a dataset that is native to R
data(mtcars)

# Take a look at the dataset and see what we will be first splitting and then recombining
View(mtcars)

# Split the dataset in two, so we can combine these back together
mtcars1 &lt;- mtcars[1:10,]
mtcars2 &lt;- mtcars[11:32,]

# Our machine is now holding the two tables in its memory - mtcars 1 and mtcars2.
# If you want to check this use the View function:

View(mtcars1)

# Use bind_rows to vertically combine the data tables
mtcarswhole &lt;- bind_rows(mtcars1, mtcars2)

# The bind_rows command is simply concatenating or combing the two datsets one on top of the other.
# Now check to see the horizontally combined data tables
View(mtcarswhole)
</code></pre></div></div>

<p>These are the two most common integration tasks we will perform - integrating datasets with complimentary variables, and integrating datasets with new observations.</p>

<p>The hard part about data integration, as should be obvious by now, is in evaluating and preparing data to be combined. Once we have thoroughly completed each of the different integration precursors our task for actually integrating tables is relatively simple.</p>

<h2 id="summary">Summary</h2>
<p>In this introduction to grand challenges in data curation we explored ways to prepare for and execute data integration at the table level. We first articulated a set of things that makes all data integration challenging:</p>

<ol>
  <li>Differences in semantic content</li>
  <li>Differences in data structure and encoding</li>
  <li>Differences in data granularity</li>
</ol>

<p>To overcome these challenges I proposed a set of <code class="language-plaintext highlighter-rouge">integration precursors</code> that included:</p>

<ol>
  <li>Modeling data content</li>
  <li>Determining Observation Depth</li>
  <li>Determining Variable Homogeneity (it’s at this stage we start to formalize our integration goals)</li>
</ol>

<p>Once these tasks were complete we looked at practical ways to combine two tables, including horizontal and vertical integration. We also were introduced to the magic of <code class="language-plaintext highlighter-rouge">dplyr</code> in performing simple data integrations in <code class="language-plaintext highlighter-rouge">R</code>.</p>

<h1 id="lecture">Lecture</h1>

<div id="som-player" class="som-embed-player" data-id="cYf3oHAIEB"><script src="https://screenpal.com/player/appearance/cYf3oHAIEB"></script><iframe width="853" height="482" style="border:0;" scrolling="no" src="https://screenpal.com/player/cYf3oHAIEB?width=100%&amp;height=100%&amp;ff=1&amp;title=0&amp;copyUrl=1" allowfullscreen="true"></iframe></div>

<h1 id="readings">Readings</h1>
<p>Data integration is a topic that can be incredibly complex, and much of the published literature fails to make this an approachable or even realistic read for a course like DC II. But below are two readings that I highly recommend:</p>

<ul>
  <li>This is a really detailed example of some serious curation activity. Don’t worry about understanding the nuances of the data, just read it for the example: Whong, Chris (2020) “<a href="ttps://medium.com/qri-io/taming-the-mtas-unruly-turnstile-data-c945f5f96ba0">Taming the MTA’s Unruly Turnstile Data</a>”</li>
  <li>The Wikipedia article on <a href="https://en.wikipedia.org/wiki/Data_integration">data integration</a> is a phenomenal overview that should compliment the content of this module</li>
</ul>

<p><em>Optional</em></p>

<p>If you are interested in the history of this topic from the perspective of databases I also highly recommend the following:</p>

<ul>
  <li>Halevy, A., Rajaraman, A., &amp; Ordille, J. (2006, September). Data integration: The teenage years. In Proceedings of the 32nd international conference on Very large data bases (pp. 9-16). <a href="https://www.cin.ufpe.br/~if696/referencias/integracao/_Data_Integration-The_Teenage_Years.pdf">PDF</a></li>
</ul>

<p>For a bit of historical background, Ch 1 of this book (pages 1-13) provides an excellent overview of how data were originally made compliant with web standards:</p>

<ul>
  <li>Abiteboul, S., Buneman, P., &amp; Suciu, D. (2000). Data on the Web: from relations to semistructured data and XML. Morgan Kaufmann. <a href="https://github.com/norlab/LIS-546-SPR2021/raw/master/content/readings/Data-on-the-Web-Skeleton.pdf">PDF</a></li>
</ul>

<h2><a id="Exercise">Exercise</a></h2>
<p>The exercise this week was inspired by an interesting analysis of New York City 311 data by <a href="https://twitter.com/chris_whong/status/1240363144654000132">Chris Whong</a> (<a href="https://web.archive.org/web/20210314224906/https://twitter.com/chris_whong/status/1240363144654000132">archived tweet</a>) who at the beginning of the Covid-19 pandemic did a lot of very interesting data analysis. What he observed back in 2019 was a 1000% increase in “Consumer Complaint” 311 requests after the first recorded case of Covid-19 infection in NYC. This was not without some important external conditions - after this recorded infection there was a more concerted effort by NYC residents to stockpile supplies. Having heard numerous informal complaints of price-gouging the city recommended that consumers report businesses using a 311 hotline.</p>

<p>A simple graph makes this more compelling than the narrative description - we see a huge spike in complaints beginning March 1st.</p>

<p><img src="https://pbs.twimg.com/media/ETapolDX0AAt9Ye?format=png&amp;name=900x900" alt="" /></p>

<p>Inspired by this creative visualizing of 311 data and by the examples included in the content this week, you will be trying your hands at integrating 311 data from two different cities from a similar time period of March 1, 2020 through May 1, 2020. Lucky for us, there is an existing repository of <a href="https://andrew-friedman.github.io/jkan/datasets/">311 city data</a>. However, retrieving data from some of these repositories can be difficult depending on the size of the data download and the ability to filter before downloading. So I am providing you with datasets to use. (If you’re really ambitious and have the time you are more than welcome to choose your own cities and download the data - but don’t prioritize this over other work for this class and other classes.)</p>

<p>I have provided you with a random sample of <a href="https://github.com/norlab/LIS-546-SPR2021/raw/master/content/data/SF_311_Feb-Apr.csv">200 rows of data from San Francisco</a> and <a href="https://github.com/norlab/LIS-546-SPR2021/raw/master/content/data/Boston_311_Feb-Apr.csv">200 rows of data from Boston</a>. (Note: you should be able to right-click on the pages that load from the links and Save Page As to open the content locally.)</p>

<p>Your exercise this week is to attempt to integrate (at least some) of the provided data. You may use your favorite tool for working with tables. Examples include: Microsoft Excel, Google Sheets, OpenRefine, R, Python. This task will be challenging but hopefully rewarding.</p>

<p><strong>Here are some helpful pointers:</strong></p>

<ul>
  <li>Try to eliminate any unnecessary variables from your dataset. If we were trying to replicate Whoung’s analysis, for example, we really only need to retain the complaint description (and possibly a code or type similar to the <code class="language-plaintext highlighter-rouge">SR_SHORT_CODE</code> from the Chicago dataset) and the date of the complaint. We don’t need all of the information about the data.</li>
  <li>Try to find some similarities in the complaint descriptions across datasets. Are there descriptions you could combine / re-code?</li>
  <li>Consumer complaints may or may not exist in these datasets, so you don’t need to focus on that specifically.</li>
  <li>You do not need to perform data analysis or data visualization. The purpose of this exercise is to practice combine two datasets.</li>
</ul>

<p><strong>What to turn in:</strong></p>

<p>Post the following in the <a href="https://canvas.uw.edu/courses/1641385/discussion_topics/8072058">discussion</a> for this week’s exercise:</p>
<ul>
  <li>Provide a table with an example of your integration. You do not need to integrate all 400 rows. Just choose an example to showcase the work you did. You can provide your new table via a Google Sheet, Excel document, .csv, or even a screenshot of the new table from whatever software platform you are using. If you were unable to integrate the the tables, show an example of the two tables and where you got stuck. I’m not promising that this will be easy, but I also don’t want you to spend hours on this. Take one hour to make your best attempt and then follow the next step.</li>
  <li>Provide an explanation (~1 paragraph) of what you tried to integrate the data, and why this was or was not challenging. Was this an example of vertical or horizontal integration (or a combination)?</li>
</ul>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

<!--     <h2 class="footer-heading">University of Washington Information School</h2> -->
         <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
 

         <p class="text">
Box 352840 - Mary Gates Hall, Ste. 370<br />
Seattle<br />
Washington<br />

      </div>

      <div class="footer-col  footer-col-2">
       <ul class="social-media-list">
     

          

          
  <li>
    <a href="https://twitter.com/uw_ischool">
      <i class="fab fa-twitter" style="color:gray"></i> uw_ischool
    </a>
  </li>


          

          

          
  <li>
    <a href="https://ischool.uw.edu/">
      <i class="fas fa-globe" style="color:gray"></i> ischool.uw.edu/
    </a>
  </li>




       
        </ul>
      </div>
    </div>

  </div>

</footer>

  </body>

</html>
<!-- d.s.m.s.050600.062508.030515.080516.030818 | "Baby, I'm Yours" -->